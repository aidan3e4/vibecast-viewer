FROM python:3.11-slim

WORKDIR /app

# Install dependencies
COPY requirements-ftp.txt .
RUN pip install --no-cache-dir -r requirements-ftp.txt

# Copy FTP server code
COPY services/ ./services/
COPY .env.example .env

# Create upload directory
RUN mkdir -p ftp_uploads

# Expose FTP port
EXPOSE 2121

# Expose passive mode port range (optional)
EXPOSE 60000-60100

# Run FTP server
CMD ["python3", "services/ftp_server.py"]
